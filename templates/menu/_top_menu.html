
{% load menubuilder %}{% top_menu topmenu %} 
{% block top_menu_block %}    
    
    <ul id="sdt_menu" class="sdt_menu" style="width:{{ menu_width }}px;">
    {% for item in menuitems %}
        <li style="width:{{ menu_item_width }}px;">
            <a href="{{ item.link_url }}" style="width:{{ menu_item_width }}px;">
                <img src="{{item.thumb}}" alt="{{item.title}}" />
                <span class="sdt_active" style="width:{{ menu_item_width }}px;"></span>
                <span class="sdt_wrap" style="width:{{ menu_item_width }}px;">
                    <span class="sdt_link" >{{item.title}}</span>
                    <span class="sdt_descr" id="sdt_descr">
                    {% if item.description %}
                        {{item.description}}
                    {% endif %}
                    </span>
                </span>
            </a>
        </li>
    {% endfor %}

    </ul>
    
    
{% endblock top_menu_block %}
       


<!-- The JavaScript -->
<script type="text/javascript">
    $(function() {
        /**
        * for each menu element, on mouseenter, 
        * we enlarge the image, and show both sdt_active span and 
        * sdt_wrap span. If the element has a sub menu (sdt_box),
        * then we slide it - if the element is the last one in the menu
        * we slide it to the left, otherwise to the right
        */
        var $elem1 = $(this);
        var $sdt_descr = $elem1.find('#sdt_descr');
        $sdt_descr.hide();
        
        $('#sdt_menu > li').bind('mouseenter',function(){
            var $elem = $(this);
            $elem.find('img')
                 .stop(true)
                 .animate({
                    'width':'{{ menu_item_width }}px',
                    'height':'{{ picture_height }}px',
                    'left':'0px'
                 },400,'easeOutBack')
                 .andSelf()
                 .find('.sdt_wrap')
                 .stop(true)
                 .animate({'top':'65px'},500,'easeOutBack')
                 .andSelf()
                 .find('.sdt_descr')
                 .show()
                 .andSelf()
                 .find('.sdt_active')
                 .stop(true)
                 .animate({'height':'100px'},300,function(){
                var $sub_menu = $elem.find('.sdt_box');
                if($sub_menu.length){
                    var left = '170px';
                    if($elem.parent().children().length == $elem.index()+1)
                        left = '-170px';
                    $sub_menu.show().animate({'left':left},200);
                }	
            });
        }).bind('mouseleave',function(){
            var $elem = $(this);
            var $sub_menu = $elem.find('.sdt_box');
            if($sub_menu.length)
                $sub_menu.hide().css('left','0px');
            
            var $sdt_descr = $elem.find('.sdt_descr');
            $sdt_descr.hide();
            
            $elem.find('.sdt_active')
                 .stop(true)
                 .animate({'height':'0px'},300)
                 .andSelf().find('img')
                 .stop(true)
                 .animate({
                    'width':'0px',
                    'height':'0px',
                    'left':'85px'},400)
                 .andSelf()
                 .find('.sdt_wrap')
                 .stop(true)
                 .animate({'top':'13px'},500);
        });
    });
</script>
